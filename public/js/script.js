"use strict";

let $flag = "test";

document.addEventListener("DOMContentLoaded",init);


function init(){

    const path = window.location.pathname;
    const page = path.split("/").pop();
    if(page === "admin"){
        loadEventListenersAdmin();
    }
    else if(page === "dashboard"){
        loadEventListeners();
    }
    else if(page === "" || page === "login"){
        loadLogInListeners();
    }
    else if(page === "register"){
        loadRegisterListeners();
    }
    else if(page === "42069"){
        loadChallenges();
    }

    if (window.location.href.indexOf("Sm9obm55IFNpbHZlcmhhbmQu") > -1){alert("flag: " + $flag)}

}

//FETCHEN SERVER
function fetchFromServer(url, method, body){
    return fetch(url, buildOptions(method, body))
        .then(res => res.json())
        .then(json => {
            return json;
        });
}
function buildOptions(method, body){
    const options = {
        method: method,
        headers: {"Content-Type": "application/json"}
    }
    if(body){
        options.body = JSON.stringify(body);
    }
    return options;
}




